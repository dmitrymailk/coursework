{"title": "Interference: a tricky pitfall of A/B Testing", "data": [{"type": "image", "content": "https://miro.medium.com/max/3840/1*XuQiNw8qC6Ypsj3Zf5lwWA.png"}, {"type": "sentence", "content": "While it is exciting to conduct A/B Testings to test the changes in product features or marketing campaigns, data scientists should be aware of the common pitfalls of A/B testing, such as interference, endogeneity issues, and misinterpretation of the statistical results. I am particularly interested in interference because it always arises in a very tricky way and even an experienced data scientist might fail to recognize this pitfall. In this article I want to briefly touch on this issue, including a concrete example of interference. I will also discuss how to identify this issue when designing the experiment and some common solutions to the interference."}, {"type": "subtitle", "content": "Interference due to shared resource: A ride-share marketplace example"}, {"type": "sentence", "content": "Add alt text"}, {"type": "image", "content": "https://miro.medium.com/max/3780/0*3q321nwy4tckY6lK"}, {"type": "sentence", "content": "Suppose a fictional ride-sharing company, Lyber, wants to simplify steps required to pick up a rider by changing the UI of the mobile app. The metric to measure the success of this change is the number of rides for a driver in a timeframe. The data science team randomly assigns drivers in New York into the treatment group (new UI) and the control group (original UI) and runs an A/B testing for 2 weeks. The team logs the key metric and performs a 2-sample t-test on it. After examining the statistical result, the team concludes p-value is significant, claiming that the new UI helps drivers pick up more riders and earn more money. As a manager, you just finished the meeting with the DS team and you have to decide whether the product team should implement the new UI based on the result of this experiment."}, {"type": "sentence", "content": "As a matter of fact, this example is no more than a common A/B testing interview question: we can\u2019t make any conclusion from this experiment because since drivers in both groups are in the same place (New York), they constitute the supply side of the marketplace together and share the demand together. If drivers in treatment take advantage of new UI, they would affect the shared demand of the marketplace. As a result, drivers in the control group would have fewer riders on the table and take fewer rides than usual. In short, the observed treatment effect is an exaggeration of the true treatment effect. We have no idea whether the true treatment effect is statistically significant."}, {"type": "subtitle", "content": "The idea of Interference"}, {"type": "sentence", "content": "Hopefully the example above gives you a basic sense of interference. The idea behind it is very straightforward: given multiple treatment groups, the behavior of one group affects the behavior of other groups. This is exactly what happened in the case above: the more riders go to drivers in one group, the fewer riders available for the driver in another group."}, {"type": "subtitle", "content": "Types of interference"}, {"type": "sentence", "content": "In general, interference may happen in two ways: indirect connections and direct connections."}, {"type": "sentence", "content": "Indirectly connection occurs when two units are connected because of latent variables or shared resources. The Lyber case above is a perfect example of indirect connection, in the sense that the treatment and control group shared the customer pool. A design of sub-user experimentation units may also lead to an indirect connection (Kohavi et al., 2020): suppose an experiment is conducted for a new idea of web UI and the experimentation unit is on the pageview level instead of on the user level. In this case, \u2018user\u2019 is a latent variable connecting the treatment and control group. As a result, both versions of web UI can be exposed to the same user, making the experiment\u2019s results unreliable."}, {"type": "sentence", "content": "Direct connection, on the other hand, occurs when two units are either in the same social network or have physical contact. This may be the reason why the engineering team of LinkedIn considers interference as a \u2018network effect\u2019. Here I would like to quote an example of a direct connection provided by Saint-Jacques(2019):"}, {"type": "sentence", "content": "\u201cImagine this: my friend is targeted for an experiment that gives her a better messaging experience. I am not targeted, and my messaging experience doesn\u2019t change. However, her better messaging experience causes her to spend more time on the site and send more messages, including some to me. I then respond to her and spend more time on the site as well. What happened here? The fact that my friend received a new feature had an impact on me, even though I was not part of the experiment. There is interference.\u201d"}, {"type": "sentence", "content": "In this fictional experiment, although the author doesn\u2019t receive the treatment, his engagement with the messaging app is impacted by a friend who was in the treatment group."}, {"type": "subtitle", "content": "Identify interference when designing an experiment"}, {"type": "sentence", "content": "Interference brings bias error into the hypothesis testing, making the entire experiment unreliable. To avoid the interference issue, think about an extreme case: If the change is really effective and makes a 10x increase in the key metric for the treatment group, would that affect the key metric for the control group? If the answer is yes. Then you may want to walk through some solutions I discuss below :)"}, {"type": "subtitle", "content": "Possible solutions to interference (after you are aware of it!)"}, {"type": "sentence", "content": "One possible solution is changing the randomization unit."}, {"type": "sentence", "content": "If the interference attributes to the geographic closeness of units, we can randomize the unit at the region level. Vaver and Koehler (2011) designed an experiment in which a geographic area of interest (e.g. country) was partitioned into a set of regions. Each region was then randomly assigned to the treatment group or the control group. The authors also suggest balancing treatment and control regions across other confounding variables (i.e. block randomization) to reduce variance."}, {"type": "sentence", "content": "Similarly, in the context of a social network, we can construct clusters of network nodes based on \u201ctheir likelihood to interfere\u201d(Kohavi et al., 2020). The cluster can be taken as the experimentation unit."}, {"type": "sentence", "content": "Alternatively, we can also use the time interval as the randomization level. Don\u2019t forget to take temporal factors (weekday/weekend; hour of the day) into account. Paired t-tests would be a good way to reduce variance. (Kohavi et al., 2020)"}, {"type": "sentence", "content": "Keep in mind that the bias-variance tradeoff still exists when changing the experimentation unit: A more specific level such as user leads to a small variance but large bias due to the interference effect. On the other hand, a more general level, such as time interval or region, leads to smaller bias but larger variance due to within-group variance. Chamandy\u2019s article (2016) gives a clear explanation for this trade-off."}, {"type": "subtitle", "content": "Last but not least"}, {"type": "sentence", "content": "The motivation behind this article is to help people get a basic idea of interference. I also encourage you to read the reference list below as they provide a broad picture of how the interference issue has been tackled by the brightest data scientist in the tech industry. I also want to thank Zhanqi Xu for designing a pretty stylish logo for the fictional company Lyber in this article based on the logos of Uber and Lyft. I hope this won\u2019t be the only thing you remember about this article:)"}, {"type": "subtitle", "content": "Reference"}, {"type": "sentence", "content": "Chamandy, N. (2016, September 2). Experimentation in a Ridesharing Marketplace. Retrieved from https://eng.lyft.com/experimentation-in-a-ridesharing-marketplace-b39db027a66e"}, {"type": "sentence", "content": "Kohavi, R., Tang, D., & Xu, Y. (2020). Trustworthy Online Controlled Experiments: A Practical Guide to A/B Testing. Cambridge University Press."}, {"type": "sentence", "content": "Saint-Jacques, G. (2019, June 5). Detecting interference: An A/B test of A/B tests. Retrieved May 22, 2020, from https://engineering.linkedin.com/blog/2019/06/detecting-interference--an-a-b-test-of-a-b-tests"}, {"type": "sentence", "content": "Vaver, J., & Koehler, J. (2011). Measuring ad effectiveness using geo experiments."}], "topic": "data-science"}